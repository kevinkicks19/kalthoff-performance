---
import '../styles/global.css';

// Updated layout with logo - April 8, 2024
interface Props {
	title: string;
	description?: string;
	image?: string;
}

const { 
	title,
	description = "Kalthoff Performance - Expert strength and conditioning coaching for athletes and fitness enthusiasts. Personalized training programs, nutrition guidance, and performance optimization.",
	image = "/images/kalthoffMedal.jpg"
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

const services = [
	{ name: 'Performance Programming', href: '/services/performance-programming' },
	{ name: 'Rehabilitation Programming', href: '/services/rehab-programming' },
	{ name: 'Daily Programming', href: '/services/daily-programming' },
	{ name: 'Team Training', href: '/services/team-training' },
	{ name: 'Sport Science', href: '/services/sport-science' },
	{ name: 'Nutrition & Supplements', href: '/services/nutrition-supplements' },
	{ name: 'Home Gym Design', href: '/services/home-gym-design' },
	{ name: 'Mentorship', href: '/services/mentorship' },
	{ name: 'Collaboration', href: '/services/collaboration' },
];
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<link rel="canonical" href={canonicalURL} />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalURL} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={new URL(image, Astro.site)} />
		
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={canonicalURL} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={new URL(image, Astro.site)} />
		
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
		
		<!-- Plausible Analytics -->
		<script defer data-domain="kalthoffperformance.com" src="https://plausible.io/js/script.js"></script>
	</head>
	<body class="min-h-screen bg-white font-inter">
		<header class="fixed w-full bg-black/70 backdrop-blur-sm shadow-md z-50">
			<nav class="container mx-auto px-4 py-4">
				<div class="flex justify-between items-center">
					<a href="/" class="flex items-center">
						<img src="/images/kpLogoWhiterefactor.png" alt="Kalthoff Performance" class="h-12 w-auto" />
					</a>
					<div class="hidden md:flex space-x-8 items-center">
						<a href="/" class="text-gray-200 hover:text-white font-medium tracking-wide">Home</a>
						<div class="relative group">
							<button class="text-gray-200 hover:text-white font-medium tracking-wide flex items-center">
								Services
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
								</svg>
							</button>
							<div class="absolute left-0 mt-2 w-64 bg-black/70 backdrop-blur-sm rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform -translate-x-1/4">
								<div class="py-2">
									{services.map(service => (
										<a href={service.href} class="block px-4 py-2 text-gray-200 hover:bg-black/90 hover:text-white">
											{service.name}
										</a>
									))}
								</div>
							</div>
						</div>
						<a href="/about" class="text-gray-200 hover:text-white font-medium tracking-wide">About</a>
						<a href="/contact" class="text-gray-200 hover:text-white font-medium tracking-wide">Contact</a>
					</div>
					<button id="mobileMenuBtn" class="md:hidden text-white" aria-label="Toggle mobile menu">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
						</svg>
					</button>
				</div>
			</nav>
		</header>

		<!-- Mobile Menu -->
		<div id="mobileMenu" class="fixed inset-y-0 right-0 w-64 bg-black/95 backdrop-blur-sm transform translate-x-full transition-transform duration-300 ease-in-out z-50">
			<div class="flex flex-col h-full pt-20 px-4">
				<button id="closeMenuBtn" class="absolute top-4 right-4 text-white" aria-label="Close mobile menu">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
					</svg>
				</button>
				<a href="/" class="text-gray-200 hover:text-white font-medium tracking-wide py-3 border-b border-gray-700">Home</a>
				<div class="py-3 border-b border-gray-700">
					<button id="mobileServicesBtn" class="text-gray-200 hover:text-white font-medium tracking-wide flex items-center justify-between w-full">
						Services
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
						</svg>
					</button>
					<div id="mobileServicesMenu" class="hidden mt-2 space-y-2 pl-4">
						{services.map(service => (
							<a href={service.href} class="block text-gray-300 hover:text-white py-2">
								{service.name}
							</a>
						))}
					</div>
				</div>
				<a href="/about" class="text-gray-200 hover:text-white font-medium tracking-wide py-3 border-b border-gray-700">About</a>
				<a href="/contact" class="text-gray-200 hover:text-white font-medium tracking-wide py-3 border-b border-gray-700">Contact</a>
			</div>
		</div>

		<main class="pt-16">
			<slot />
		</main>

		<footer class="bg-black text-white py-12">
			<div class="container mx-auto px-4">
				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					<div>
						<h3 class="text-xl font-bebas tracking-wider mb-4">Kalthoff Performance</h3>
						<p class="text-gray-300 font-inter">Your journey to peak performance starts here.</p>
					</div>
					<div>
						<h3 class="text-xl font-bebas tracking-wider mb-4">Our Services</h3>
						<ul class="space-y-2 font-inter">
							{services.map(service => (
								<li><a href={service.href} class="text-gray-300 hover:text-white transition duration-300">{service.name}</a></li>
							))}
						</ul>
					</div>
					<div>
						<h3 class="text-xl font-bebas tracking-wider mb-4">Contact Us</h3>
						<ul class="space-y-2 text-gray-300 font-inter">
							<li>Email: kalthoffperformance@gmail.com</li>
						</ul>
					</div>
				</div>
				<div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-300">
					<p>&copy; {new Date().getFullYear()} Kalthoff Performance. All rights reserved.</p>
				</div>
			</div>
		</footer>

		<script>
			const mobileMenuBtn = document.getElementById('mobileMenuBtn');
			const closeMenuBtn = document.getElementById('closeMenuBtn');
			const mobileMenu = document.getElementById('mobileMenu');
			const mobileServicesBtn = document.getElementById('mobileServicesBtn');
			const mobileServicesMenu = document.getElementById('mobileServicesMenu');
			const servicesArrow = mobileServicesBtn?.querySelector('svg');

			function toggleMobileMenu() {
				mobileMenu?.classList.toggle('translate-x-full');
				document.body.classList.toggle('overflow-hidden');
			}

			function toggleServicesMenu() {
				mobileServicesMenu?.classList.toggle('hidden');
				servicesArrow?.classList.toggle('rotate-180');
			}

			mobileMenuBtn?.addEventListener('click', toggleMobileMenu);
			closeMenuBtn?.addEventListener('click', toggleMobileMenu);
			mobileServicesBtn?.addEventListener('click', toggleServicesMenu);

			// Close mobile menu when clicking outside
			document.addEventListener('click', (e) => {
				const target = e.target as HTMLElement;
				if (mobileMenu && !mobileMenu.contains(target) && !mobileMenuBtn?.contains(target)) {
					mobileMenu.classList.add('translate-x-full');
					document.body.classList.remove('overflow-hidden');
				}
			});
		</script>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
